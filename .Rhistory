female +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party  , data=dat[dat$state==states[i],])
m2 <- felm(coop ~  log(cases)*likely.party + dem.perc20 + density +
female  +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party ,  data=dat[dat$state==states[i],])
summary(m1)
coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyI"]
coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyR"]
contact.coefs[i,1] <- coef(m1)["log(cases)"]
contact.coefs[i,2] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyI"]
contact.coefs[i,3] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyR"]
coop.coefs[i,1] <- coef(m2)["log(cases)"]
coop.coefs[i,2] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyI"]
coop.coefs[i,3] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyR"]
contact.coefs <- matrix(NA, nrow=length(states), ncol=3)
coop.coefs <- matrix(NA, nrow=length(states), ncol=3)
contact.coefs[i,1] <- coef(m1)["log(cases)"]
contact.coefs[i,2] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyI"]
contact.coefs[i,3] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyR"]
coop.coefs[i,1] <- coef(m2)["log(cases)"]
coop.coefs[i,2] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyI"]
coop.coefs[i,3] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyR"]
contact.coefs
sqrt(vcov(m1)["log(cases)", "log(cases"])
vcom(m1)
vcov(m1)
vcov(m1)["log(cases)", "log(cases"]
sqrt(vcov(m1)["log(cases)","log(cases)"])
summary(m1)
sqrt(vcov(m1)["log(cases)","log(cases)"]) + sqrt(vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"]) - 2*sqrt(vcov(m1)["log(cases):likely.partyI","log(cases)"])
vcov(m1)["log(cases)","log(cases)"])
vcov(m1)["log(cases)","log(cases)"]
vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"]
vcov(m1)["log(cases):likely.partyI","log(cases)"])
contact.ses[i,2] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"] - 2*vcov(m1)["log(cases):likely.partyI","log(cases)"])
contact.ses <- matrix(NA, nrow=length(states), ncol=3)
coop.ses <- matrix(NA, nrow=length(states), ncol=3)
contact.ses[i,1] <- sqrt(vcov(m1)["log(cases)","log(cases)"])
contact.ses[i,2] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"] - 2*vcov(m1)["log(cases):likely.partyI","log(cases)"])
contact.ses
contact.coefs <- matrix(NA, nrow=length(states), ncol=3)
coop.coefs <- matrix(NA, nrow=length(states), ncol=3)
contact.ses <- matrix(NA, nrow=length(states), ncol=3)
coop.ses <- matrix(NA, nrow=length(states), ncol=3)
for(i in 1:length(states)){
m1 <- felm(contact ~  log(cases)*likely.party + dem.perc20 + density +
female +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party  , data=dat[dat$state==states[i],])
m2 <- felm(coop ~  log(cases)*likely.party + dem.perc20 + density +
female  +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party ,  data=dat[dat$state==states[i],])
contact.coefs[i,1] <- coef(m1)["log(cases)"]
contact.coefs[i,2] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyI"]
contact.coefs[i,3] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyR"]
coop.coefs[i,1] <- coef(m2)["log(cases)"]
coop.coefs[i,2] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyI"]
coop.coefs[i,3] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyR"]
contact.ses[i,1] <- sqrt(vcov(m1)["log(cases)","log(cases)"])
contact.ses[i,2] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"] - 2*vcov(m1)["log(cases):likely.partyI","log(cases)"])
contact.ses[i,3] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyR"] - 2*vcov(m1)["log(cases):likely.partyR","log(cases)"])
coop.ses[i,1] <- sqrt(vcov(m2)["log(cases)","log(cases)"])
coop.ses[i,2] <- sqrt(vcov(m2)["log(cases)","log(cases)"] + vcov(m2)["log(cases):likely.partyI","log(cases):likely.partyI"] - 2*vcov(m2)["log(cases):likely.partyI","log(cases)"])
coop.ses[i,3] <- sqrt(vcov(m2)["log(cases)","log(cases)"] + vcov(m2)["log(cases):likely.partyI","log(cases):likely.partyR"] - 2*vcov(m2)["log(cases):likely.partyR","log(cases)"])
}
for(i in 1:length(states)){
m1 <- felm(contact ~  log(cases)*likely.party + dem.perc20 + density +
female +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party  , data=dat[dat$state==states[i],])
m2 <- felm(coop ~  log(cases)*likely.party + dem.perc20 + density +
female  +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party ,  data=dat[dat$state==states[i],])
contact.coefs[i,1] <- coef(m1)["log(cases)"]
contact.coefs[i,2] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyI"]
contact.coefs[i,3] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyR"]
coop.coefs[i,1] <- coef(m2)["log(cases)"]
coop.coefs[i,2] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyI"]
coop.coefs[i,3] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyR"]
contact.ses[i,1] <- sqrt(vcov(m1)["log(cases)","log(cases)"])
contact.ses[i,2] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"] + 2*vcov(m1)["log(cases):likely.partyI","log(cases)"])
contact.ses[i,3] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyR"] + 2*vcov(m1)["log(cases):likely.partyR","log(cases)"])
coop.ses[i,1] <- sqrt(vcov(m2)["log(cases)","log(cases)"])
coop.ses[i,2] <- sqrt(vcov(m2)["log(cases)","log(cases)"] + vcov(m2)["log(cases):likely.partyI","log(cases):likely.partyI"] + 2*vcov(m2)["log(cases):likely.partyI","log(cases)"])
coop.ses[i,3] <- sqrt(vcov(m2)["log(cases)","log(cases)"] + vcov(m2)["log(cases):likely.partyI","log(cases):likely.partyR"] + 2*vcov(m2)["log(cases):likely.partyR","log(cases)"])
}
coop.ses
plot(contact.coefs[,1],ypos, xlim=c(), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=F, col="dodgerblue", type="p")
ypos <- seq(1,length(state))
ypos2 <- ypos-.25
ypos3 <- ypos2-.25
ypos <- seq(1,length(states))
ypos2 <- ypos-.25
ypos3 <- ypos2-.25
plot(contact.coefs[,1],ypos, xlim=c(), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=F, col="dodgerblue", type="p")
plot(contact.coefs[,1],ypos, xlim=c(), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=T, col="dodgerblue", type="p")
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.01), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=T, col="dodgerblue", type="p")
points(ind.biden,ypos2, pch=16, col="purple", type="p")
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.01), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=T, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
contact.coefs
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.02), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=T, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
axis(side=1, at=seq(0,100,25))
axis(side=1, at=seq(-0.02,0.02,0.01))
axis(side=2, at=ypos2, labels=state, las=2)
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
segments(contact.coefs[,1],ypos, contact.coefs[,1] +contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos, contact.coefs[,2] + contact.ses[,2]*1.96,ypos, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos, contact.coefs[,3] + contact.ses[,3]*1.96,ypos, col="firebrick")
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.02), ylim=c(0,7),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=T, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
ypos
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.02), ylim=c(0,12),pch=16, xlab="Percentage Likely Partisans Voting Biden", ylab="",
axes=T, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.02), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=T, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.02,0.02,0.01))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(contact.coefs[,1],ypos, xlim=c(-0.02, 0.02), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=F, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.02,0.02,0.01))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(coop.coefs[,1],ypos, xlim=c(-0.02, 0.02), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.02,0.02,0.01))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(contact.coefs[,1],ypos, xlim=c(-0.1, 0.1), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=F, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.1,0.1,0.025))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(contact.coefs[,1],ypos, xlim=c(-0.05, 0.05), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=F, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.05,0.05,0.025))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(contact.coefs[,1],ypos, xlim=c(-0.025, 0.025), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=F, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.025,0.025,0.005))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(coop.coefs[,1],ypos, xlim=c(-0.025, 0.025), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.025,0.025,0.005))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(coop.coefs[,1],ypos, xlim=c(-0.05, 0.05), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.025,0.025,0.005))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(coop.coefs[,1],ypos, xlim=c(-0.075, 0.075), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.075,0.075,0.025))
plot(coop.coefs[,1],ypos, xlim=c(-0.075, 0.075), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.075,0.075,0.025))
axis(side=1, at=seq(-0.075,0.075,0.005))
plot(coop.coefs[,1],ypos, xlim=c(-0.075, 0.075), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.075,0.075,0.005))
plot(coop.coefs[,1],ypos, xlim=c(-0.075, 0.075), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.075,0.075,0.01))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
plot(coop.coefs[,1],ypos, xlim=c(-0.075, 0.075), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.075,0.075,0.01))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
pdf(file="Figures/COVIDContactState.pdf", height=10, width=8)
plot(contact.coefs[,1],ypos, xlim=c(-0.025, 0.025), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=F, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.025,0.025,0.005))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
dev.off()
setwd("C:/Users/Marc/Dropbox/PORES (1)/2020 General/Exit Poll Disposition Files")
pdf(file="Figures/COVIDContactState.pdf", height=10, width=8)
plot(contact.coefs[,1],ypos, xlim=c(-0.025, 0.025), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Contact)", ylab="",
axes=F, col="dodgerblue", type="p")
points(contact.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(contact.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(contact.coefs[,1] - contact.ses[,1]*1.96,ypos, contact.coefs[,1] + contact.ses[,1]*1.96,ypos, col="dodgerblue")
segments(contact.coefs[,2] - contact.ses[,2]*1.96,ypos2, contact.coefs[,2] + contact.ses[,2]*1.96,ypos2, col="purple")
segments(contact.coefs[,3] - contact.ses[,3]*1.96,ypos3, contact.coefs[,3] + contact.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.025,0.025,0.005))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
dev.off()
pdf(file="Figures/COVIDCoopState.pdf", height=10, width=8)
plot(coop.coefs[,1],ypos, xlim=c(-0.075, 0.075), ylim=c(0,12),
pch=16, xlab="Effect of ln(COVID Cases) on P(Coop)", ylab="",
axes=F, col="dodgerblue", type="p")
points(coop.coefs[,2],ypos2, pch=16, col="purple", type="p")
points(coop.coefs[,3],ypos3, pch=16, col="firebrick", type="p")
abline(h=ypos-.8, lty=2)
abline(v=0, lty=3, lwd=2)
segments(coop.coefs[,1] - coop.ses[,1]*1.96,ypos, coop.coefs[,1] + coop.ses[,1]*1.96,ypos, col="dodgerblue")
segments(coop.coefs[,2] - coop.ses[,2]*1.96,ypos2, coop.coefs[,2] + coop.ses[,2]*1.96,ypos2, col="purple")
segments(coop.coefs[,3] - coop.ses[,3]*1.96,ypos3, coop.coefs[,3] + coop.ses[,3]*1.96,ypos3, col="firebrick")
axis(side=1, at=seq(-0.075,0.075,0.01))
axis(side=2, at=ypos2, labels=states, las=2)
legend("topleft", c("Democrats","Independent", "Republican"),
pch=c(16,16,16), col=c("dodgerblue","purple","firebrick"), cex=.75)
dev.off()
stargazer(m1,m2,  style="apsr", type="text",
dep.var.labels = c("P(Contact)","P(Cooperate)"),
covariate.labels = c("ln(COVID Cases)","Likely Independent",
"Likely Republican","ln(COVID Cases)*Likely Indendent",
"ln(COVID Cases)*Likely Republican") ,
keep=c("cases", "likely.partyI",
"likely.partyR","log(cases):likely.partyI",
"log(cases):likely.partyR"),
add.lines = list(c("Demographic Controls","Yes","Yes"),
c("State Fixed Effects", "Yes","Yes")))
#MT Analysis of Survey Disposition
#PORES AAPOR
#December 2020
rm(list=ls())
load(file="C:/Users/Marc/Dropbox/PORES (1)/2020 General/Exit Poll Disposition Files/Disposition files/DispositionDataForAnalysis.Rdata")
library(lfe)
library(stargazer)
#Add one to cases so we can log
dat$cases <- dat$cases+1
#Determine which states have imputed and which states have party registration
table(dat$state)
#Create other race category so that white can be omitted category
dat$other.race <- NA
dat$other.race[dat$white==0 & dat$black==0 & dat$hispanic==0]<- 1
dat$other.race[dat$white==1 | dat$black==1 | dat$hispanic==1]<- 0
table(dat$other.race)
table(dat$other.race, dat$white)
#First, modeling overall likelihood to be contacted or to cooperate
m1 <- felm(contact ~  log(cases)*likely.party + dem.perc20 + density +
female +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party  | state | 0 | state, data=dat)
m2 <- felm(coop ~  log(cases)*likely.party + dem.perc20 + density +
female  +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party | state | 0 | state, data=dat)
stargazer(m1,m2, type="text",
keep=c("cases", "likely.partyI",
"likely.partyR","log(cases):likely.partyI",
"log(cases):likely.partyR"))
getfe(m1)
labels <- c("ln(COVID Cases)","Dem % Pres. Election 2020",
"Suburban Zip","Urban Zip","Female",
"30-39","40-49","50-59","60-74","75 Plus","Other Race",
"Black","Hispanic","Independent/Other","Republican")
stargazer(m1,m2,  style="apsr",
dep.var.labels = c("P(Contact)","P(Cooperate)"),
covariate.labels = c("ln(COVID Cases)","Likely Independent",
"Likely Republican","ln(COVID Cases)*Likely Indendent",
"ln(COVID Cases)*Likely Republican") ,
keep=c("cases", "likely.partyI",
"likely.partyR","log(cases):likely.partyI",
"log(cases):likely.partyR"),
add.lines = list(c("Demographic Controls","Yes","Yes"),
c("State Fixed Effects", "Yes","Yes")))
stargazer(m1,m2,  style="apsr", type="text",
dep.var.labels = c("P(Contact)","P(Cooperate)"),
covariate.labels = c("ln(COVID Cases)","Likely Independent",
"Likely Republican","ln(COVID Cases)*Likely Indendent",
"ln(COVID Cases)*Likely Republican") ,
keep=c("cases", "likely.partyI",
"likely.partyR","log(cases):likely.partyI",
"log(cases):likely.partyR"),
add.lines = list(c("Demographic Controls","Yes","Yes"),
c("State Fixed Effects", "Yes","Yes")))
states <- unique(dat$state)
contact.coefs <- matrix(NA, nrow=length(states), ncol=3)
coop.coefs <- matrix(NA, nrow=length(states), ncol=3)
contact.ses <- matrix(NA, nrow=length(states), ncol=3)
coop.ses <- matrix(NA, nrow=length(states), ncol=3)
for(i in 1:length(states)){
m1 <- felm(contact ~  log(cases)*likely.party + dem.perc20 + density +
female +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party  , data=dat[dat$state==states[i],])
m2 <- felm(coop ~  log(cases)*likely.party + dem.perc20 + density +
female  +Age3039 + Age4049 + Age5059 + Age6074 + Age75p +
other.race + black + hispanic + likely.party ,  data=dat[dat$state==states[i],])
contact.coefs[i,1] <- coef(m1)["log(cases)"]
contact.coefs[i,2] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyI"]
contact.coefs[i,3] <- coef(m1)["log(cases)"] + coef(m1)["log(cases):likely.partyR"]
coop.coefs[i,1] <- coef(m2)["log(cases)"]
coop.coefs[i,2] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyI"]
coop.coefs[i,3] <- coef(m2)["log(cases)"] + coef(m2)["log(cases):likely.partyR"]
contact.ses[i,1] <- sqrt(vcov(m1)["log(cases)","log(cases)"])
contact.ses[i,2] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyI"] + 2*vcov(m1)["log(cases):likely.partyI","log(cases)"])
contact.ses[i,3] <- sqrt(vcov(m1)["log(cases)","log(cases)"] + vcov(m1)["log(cases):likely.partyI","log(cases):likely.partyR"] + 2*vcov(m1)["log(cases):likely.partyR","log(cases)"])
coop.ses[i,1] <- sqrt(vcov(m2)["log(cases)","log(cases)"])
coop.ses[i,2] <- sqrt(vcov(m2)["log(cases)","log(cases)"] + vcov(m2)["log(cases):likely.partyI","log(cases):likely.partyI"] + 2*vcov(m2)["log(cases):likely.partyI","log(cases)"])
coop.ses[i,3] <- sqrt(vcov(m2)["log(cases)","log(cases)"] + vcov(m2)["log(cases):likely.partyI","log(cases):likely.partyR"] + 2*vcov(m2)["log(cases):likely.partyR","log(cases)"])
}
ypos <- seq(1,length(states))
ypos2 <- ypos-.25
ypos3 <- ypos2-.25
states
#
rm(list=ls())
load("C:/Users/Marc/Dropbox/PORES (1)/2020 General/Exit Poll Disposition Files/Disposition files/Cleaned Files/WICleaned.Rdata")
wi.ts <- read.csv("C:/Users/Marc/Dropbox/PORES (1)/TargetSmart/RBS Sample Matches/WI_plus_vote_method.csv")
table(wi$id %in% wi.ts$id)
rm(list=ls())
setwd("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021")
#SMData
load("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/Raw Data/SM Data/SMData.Rdata")
table(nchar(sm.dat$fips))
#5 character county
save(sm.dat,sm.labels,file="SMData.Rdata")
names(sm)
names(sm.dat)
names(sm.dat)[1] <- "county"
sm.labels
head(sm.dat)
sm.labels$county
rm(list=ls())
setwd("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021")
#SMData
load("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/Raw Data/SM Data/SMData.Rdata")
table(nchar(sm.dat$fips))
names(sm.dat)[1] <- "county"
sm.labels$county
#5 character county
save(sm.dat,sm.labels,file="SMData.Rdata")
write.csv(sm.dat, file="C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021/CSVs/SMData.csv")
write.csv(sm.labels, file="C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021/CSVs/SMLabels.csv")
#Election Data
load("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/Raw Data/Election Data/Combined20162020CountyResults.Rdata")
head(e)
elect <- e
names(elect)[1] <- "county"
save(elect, file="Combined20162020ElectionResults.Rdata")
write.csv(elect, file="C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021/CSVs/Combined20162020ElectionResults.csv")
#5 character county
#Covid Data
load("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/Raw Data/COVID Data/COVIDCountySept30.Rdata")
head(jh.total)
jh.total$county.date <- NULL
jh.total$state <- NULL
names(jh.total)[1] <- "county"
table(nchar(jh.total$county))
save(jh.total, file="JohnsHopkinsCOVIDDataSept30.Rdata")
write.csv(jh.total, file="C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021/CSVs/JohnsHopkinsCOVIDDataSept30.csv")
#Demographics
load("C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/Raw Data/County Demographics/ACS5Year2014-2019.Rdata")
head(acs)
acs$county[nchar(acs$county)==4] <- paste("0",acs$county[nchar(acs$county)==4], sep="")
table(nchar(acs$county))
save(acs, file="ACS5Year2014-2019.Rdata")
write.csv(acs, file="C:/Users/Marc/Dropbox/PORES/hackathons/2021-03 - hackathon/PORESHackathonDataSpring2021/CSVs/ACS5Year2014-2019.csv")
rm(list=ls())
